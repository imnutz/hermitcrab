<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
  <script type="text/javascript">
    !function(t,e){if(void 0===e[t]){e[t]=function(){e[t].clients.push(this),this._init=[Array.prototype.slice.call(arguments)]},e[t].clients=[];for(var r=function(t){return function(){return this["_"+t]=this["_"+t]||[],this["_"+t].push(Array.prototype.slice.call(arguments)),this}},s=["addRecord","blockEvents","fetchServerCookie","fetchGlobalID","fetchUserSegments","resetUUID","ready","setSignedMode","setAnonymousMode","set","trackEvent","trackPageview","trackClicks","unblockEvents"],n=0;n<s.length;n++){var c=s[n];e[t].prototype[c]=r(c)}var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=("https:"===document.location.protocol?"https:":"http:")+"//td-jssdk.s3.amazonaws.com/td.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)}}("Treasure",this);
  </script>
  <script>
    function successCallback (preferences) {
      if (preferences['analytics'] && preferences['analytics'].status === 'given') {
        td.setSignedMode()
        td.unblockEvents()
      } else if (preferences['analytics'] && preferences['analytics'].status === 'refused') {
        td.setAnonymousMode()
        td.blockEvents()
      }

      td.trackPageview()
    }

    var td = new Treasure({
      database: 'database',
      writeKey: '1/xxxxxxxxxx',
      host: 'in.treasuredata.com',
      consentManager: {
        storageKey: 'consent_preferences',
        successConsentCallback: successCallback
      }
    })

    // we setup contexts and consents when the TD JavaScript SDK is ready
    td.ready(function () {
      // check if the preferences exists
      // otherwise don't do the setup again.
      if (!td.getPreferences()) {
        var contextId = td.addContext({
          brand: 'A Brand',
         domain_name: 'abrand.com',
          collection_type: 'Whole website',
          collection_point_id: 'whole_website'
        })

        td.addConsents({
          analytics: {
            description:
              'We use browser cookies that are necessary for the site to work as intended.For example, we store your website data collection preferences so we can honor them if you return to our site. You can disable these cookies in your browser settings but if you do the site may not work as intended.',
            status: td.consentManager.states.GIVEN,
            datatype: 'Visits',
            context_id: contextId,
          }
        })

        contextId = td.addContext({
          brand: 'Treasure Data',
          domain_name: 'treasuredata.com',
          collection_type: 'Shopping Cart',
          collection_point_id: 'shopping_trnx_id'
        })

        td.addConsents({
          recommendations: {
            description: 'Description of the consent',
            status: td.consentManager.states.GIVEN,
            datatype: 'Purchases',
            context_id: contextId
          },
          storing: {
            description: 'Description',
            datatype: 'Purchases',
            status: td.consentManager.states.REFUSED,
            context_id: contextId
          }
        })

        td.saveContexts()
        td.saveConsents()
      }
    }) 
  </script>
</head>
<body>
  <p>
    Lorem adipisicing soluta animi in tempora A vitae autem deleniti quisquam ipsa. Quod placeat accusantium consequatur minus ad tempora Itaque libero tenetur fugiat voluptas vel repudiandae repellat quas Quod quisquam
  </p>
  <p>
    Lorem adipisicing soluta animi in tempora A vitae autem deleniti quisquam ipsa. Quod placeat accusantium consequatur minus ad tempora Itaque libero tenetur fugiat voluptas vel repudiandae repellat quas Quod quisquam
  </p>
  <p>
    Lorem adipisicing soluta animi in tempora A vitae autem deleniti quisquam ipsa. Quod placeat accusantium consequatur minus ad tempora Itaque libero tenetur fugiat voluptas vel repudiandae repellat quas Quod quisquam
  </p>
  <p>
    Lorem adipisicing soluta animi in tempora A vitae autem deleniti quisquam ipsa. Quod placeat accusantium consequatur minus ad tempora Itaque libero tenetur fugiat voluptas vel repudiandae repellat quas Quod quisquam
  </p>
</body>
</html>
