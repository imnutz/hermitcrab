<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RT Personalization 2.0</title>
  <style>
    .field {
      display: flex;
      align-items: center;
      padding: 5px;
    }
    .field.buttons button {
      margin-right: 5px;
    }
    .field.buttons .first {
      margin-right: 30px;
    }
    textarea#payload {
      height: 100px;
      width: 300px;
    }
  </style>
  <script type="text/javascript">
  !function(t,e){if(void 0===e[t]){e[t]=function(){e[t].clients.push(this),this._init=[Array.prototype.slice.call(arguments)]},e[t].clients=[];for(var r=function(t){return function(){return this["_"+t]=this["_"+t]||[],this["_"+t].push(Array.prototype.slice.call(arguments)),this}},s=["collectTags","addRecord","blockEvents","fetchServerCookie","fetchGlobalID","fetchUserSegments","fetchPersonalization","resetUUID","ready","setSignedMode","setAnonymousMode","set","trackEvent","trackPageview","trackClicks","unblockEvents"],c=0;c<s.length;c++){var o=s[c];e[t].prototype[o]=r(o)}var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.treasuredata.com/sdk/4.3/td.min.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}}("Treasure",this);
  </script>
  <script>
    var params = new URLSearchParams(window.location.search);
    var apiKey = params.get('apikey');

    var td = new Treasure({
      database: 'xxxxxxxxxx',
      writeKey: 'xxxxxxxxxx',
      host: 'xxxxxxxxxx'
    });

    td.ready(function() {
      if (apiKey) {
        td.client.writeKey = apiKey;
      }
    })
  </script>
  <script src="rt_p13n.js" type="text/javascript" defer></script>
</head>
<body>
  <h1>RT P13N</h1> 
  <div class="field">
    <label for="host">Host:
      <select name="host" id="host">
        <option value="us01.p13n.in.treasuredata.com">us01.p13n.in.treasuredata.com</option>
        <option value="eu01.p13n.in.treasuredata.com">eu01.p13n.in.treasuredata.com</option>
      </select>
    </label>
  </div>

  <div class="field">
    <label for="token">P13n token:
      <input type="text" name="token" id="token">
    </label>
  </div>

  <div class="field">
    <label for="db">Database:
      <input type="text" name="db" id="db" value="rt_retail_golden">
    </label>
    <label for="tb">Table:
      <input type="text" name="tb" id="tb" value="pageviews">
    </label>
  </div>
  <div class="field">
    <label for="payload">Payload(JSON):
      <textarea name="payload" id="payload"></textarea>
    </label>
  </div>
  <div class="field buttons">
    <button id="request" class="first">Request</button>
    <button id="add_to_cart">Add to cart</button>
    <button id="by_now">Buy now</button>
    <button id="add_to_wishlist">Add to wishlist</button>
    <button id="subscribe">Subscribe</button>
  </div>
  <hr/>
  <pre id="display"></pre>
</body>
</html>
