<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>CAPI Cookies</title>
        <script
            src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"
            type="text/javascript"
        ></script>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css"
            integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls"
            crossorigin="anonymous"
        />
        <script type="text/javascript">
            !(function (t, e) {
                if (void 0 === e[t]) {
                    (e[t] = function () {
                        e[t].clients.push(this),
                            (this._init = [
                                Array.prototype.slice.call(arguments),
                            ]);
                    }),
                        (e[t].clients = []);
                    for (
                        var r = function (t) {
                                return function () {
                                    return (
                                        (this["_" + t] = this["_" + t] || []),
                                        this["_" + t].push(
                                            Array.prototype.slice.call(
                                                arguments,
                                            ),
                                        ),
                                        this
                                    );
                                };
                            },
                            s = [
                                "addRecord",
                                "blockEvents",
                                "fetchServerCookie",
                                "fetchGlobalID",
                                "fetchUserSegments",
                                "resetUUID",
                                "ready",
                                "setSignedMode",
                                "setAnonymousMode",
                                "set",
                                "trackEvent",
                                "trackPageview",
                                "trackClicks",
                                "unblockEvents",
                                "collectTags",
                            ],
                            c = 0;
                        c < s.length;
                        c++
                    ) {
                        var o = s[c];
                        e[t].prototype[o] = r(o);
                    }
                    var n = document.createElement("script");
                    (n.type = "text/javascript"),
                        (n.async = !0),
                        (n.src =
                            ("https:" === document.location.protocol
                                ? "https:"
                                : "http:") +
                            "//imnutzs3.s3.us-east-1.amazonaws.com/td.js");
                    var i = document.getElementsByTagName("script")[0];
                    i.parentNode.insertBefore(n, i);
                }
            })("Treasure", this);
        </script>
        <script src="/capi/index.js" defer></script>
        <script>
            var td = new Treasure({
                database: "_sondo",
                writeKey: "xxxxxxxxxx",
                host: "us01-development.records.in.treasuredata.com",
                cdpHost: "cdp-development.in.treasuredata.com",
                startInSignedMode: true,
            });
        </script>
        <style>
            body {
                padding: 1rem;
            }
            h2 {
                margin-top: 0;
            }
            button {
                padding: 3px;
                border-radius: 3px;
                font-size: medium;
            }
            .part {
                padding: 5px 0;
            }
            pre {
                background-color: lightgray;
                padding: 8px;
                border-radius: 3px;
            }
            .notice {
                border: 1px dashed;
                border-color: crimson;
                padding: 3px;
                margin-bottom: 1rem;
            }
            .notice p {
                margin: 0;
                padding: 0;
            }
        </style>
    </head>
    <body>
        <div class="pure-g">
            <div class="pure-u-12-24">
                <h2>[Testing] Ads Cookies for Conversion API</h2>
                <div class="notice pure-u-13-24">
                    <p>
                        - Delete the cookies: go to the Developer Tools to
                        remove them
                    </p>
                    <p>- Delete the params: remove them from the address bar</p>
                </div>
                <h3>Set Params</h3>
                <div class="buttons">
                    <div class="part">
                        <button id="para_gclid" class="pure-button">
                            Google ads: gclid
                        </button>
                        <button id="para_wbraid" class="pure-button">
                            Google ads: wbraid
                        </button>
                    </div>
                    <div class="part">
                        <button id="para_fbclid" class="pure-button">
                            Meta: fbclid
                        </button>
                    </div>
                    <div class="part">
                        <button id="para_yclid" class="pure-button">
                            Yahoo: yclid
                        </button>
                    </div>
                    <div class="part">
                        <button id="para_ldtagcl" class="pure-button">
                            Line: ldtag_cl
                        </button>
                    </div>
                    <div class="part">
                        <button id="para_twclid" class="pure-button">
                            X: twclid
                        </button>
                    </div>
                    <div class="part">
                        <button id="para_epik" class="pure-button">
                            Pinterest: epik
                        </button>
                    </div>
                    <div class="part">
                        <button id="para_sccid" class="pure-button">
                            Snapchat: ScCid
                        </button>
                    </div>
                </div>

                <h3>Set Cookie</h3>
                <div class="buttons">
                    <div class="part">
                        <button id="c_ga" class="pure-button">
                            G Analytics: _ga
                        </button>
                    </div>
                    <div class="part">
                        <form class="pure-form">
                            <fieldset>
                                <legend>Google Marketing Platform</legend>
                                <input
                                    id="gcl-prefix"
                                    type="text"
                                    placeholder="Prefix: default=_gcl"
                                />
                                <input
                                    id="gcl-name"
                                    type="text"
                                    placeholder="name"
                                />
                                <button id="c_gmp" class="pure-button">
                                    Set Google MP Cookie
                                </button>
                            </fieldset>
                        </form>
                    </div>
                    <div class="part">
                        <button id="c_fbc" class="pure-button">
                            Meta: _fbc
                        </button>
                        <button id="c_fbp" class="pure-button">
                            Meta: _fbp
                        </button>
                    </div>
                    <div class="part">
                        <button id="c_shbts" class="pure-button">
                            Instagram: shbts
                        </button>
                        <button id="c_shbid" class="pure-button">
                            Instagram: shbid
                        </button>
                        <button id="c_dsuserid" class="pure-button">
                            Instagram: ds_user_id
                        </button>
                        <button id="c_igdid" class="pure-button">
                            Instagram: ig_did
                        </button>
                    </div>
                    <div class="part">
                        <button id="c_yclyjad" class="pure-button">
                            Yahoo: _ycl_yjad
                        </button>
                        <button id="c_yjryjad" class="pure-button">
                            Yahoo: _yjr_yjad
                        </button>
                        <button id="c_yjsuyjad" class="pure-button">
                            Yahoo: _yjsu_yjad
                        </button>
                    </div>
                    <div class="part">
                        <button id="c_ltcid" class="pure-button">
                            Line: __lt__cid
                        </button>
                        <button id="c_ltsid" class="pure-button">
                            Line: __lt__sid
                        </button>
                    </div>
                    <div class="part">
                        <button id="c_twclid" class="pure-button">
                            X: _twclid
                        </button>
                    </div>
                    <div class="part">
                        <button id="c_epik" class="pure-button">
                            Pinterest: _epik
                        </button>
                    </div>

                    <div class="part">
                        <button id="c_ttp" class="pure-button">
                            Tiktok: _ttp
                        </button>
                    </div>

                    <div class="part">
                        <button id="c_mktotrk" class="pure-button">
                            Marketo: _mkto_trk
                        </button>
                    </div>

                    <div class="part">
                        <button id="c_utagmain" class="pure-button">
                            Tealium: utag_main
                        </button>
                    </div>
                </div>
            </div>
            <div class="pure-u-12-24">
                <div class="notice pure-u-1">
                    Once the properties are added to <b>$global</b> table, we
                    cannot delete them. In case, you see an unexpected querying
                    result, please refresh the page.
                </div>
                <form class="pure-form pure-form-aligned">
                    <fieldset>
                        <div class="pure-g">
                            <div class="pure-u-1 pure-control-group">
                                <label for="i_vendors">Vendors:</label>
                                <input
                                    type="text"
                                    id="i_vendors"
                                    class="pure-input-3-4"
                                />
                            </div>

                            <div class="pure-u-1 pure-control-group">
                                <label for="i_cookies">Cookies:</label>
                                <input
                                    type="text"
                                    id="i_cookies"
                                    class="pure-input-3-4"
                                />
                            </div>

                            <div class="pure-u-1 pure-control-group">
                                <label for="i_params">Params:</label>
                                <input
                                    type="text"
                                    id="i_params"
                                    class="pure-input-3-4"
                                />
                            </div>

                            <div class="pure-u-1 pure-control-group">
                                <label for="i_params"
                                    >Google Marketing Platform Prefix:</label
                                >
                                <input
                                    type="text"
                                    id="i_prefix"
                                    class="pure-input-2-4"
                                />
                            </div>
                            <div class="pure-controls">
                                <button
                                    type="button"
                                    class="pure-button pure-button-primary"
                                    id="fetch_tags"
                                >
                                    Fetch tags
                                </button>
                            </div>
                        </div>
                    </fieldset>
                </form>
                <div class="pure-g">
                    <h4 class="pure-u-1">Result:</h4>
                    <pre class="pure-u-1" id="result"></pre>
                </div>
            </div>
        </div>
    </body>
</html>
