<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Testing TD.JS.SDK</title>
  <style>
    html,
    body,
    h1 {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, Helvetica, sans-serif;
      font-size: 1rem;
    }
    .container {
      width: 960px;
      margin: 0 auto;
    }
    p {
      padding: 15px;
      margin-top: 5px;
    }
    h1 {
      padding: 30px 15px;
      border-bottom: 1px solid gray;
    }
  </style>
  <script type="text/javascript">
    !function(t,e){if(void 0===e[t]){e[t]=function(){e[t].clients.push(this),this._init=[Array.prototype.slice.call(arguments)]},e[t].clients=[];for(var r=function(t){return function(){return this["_"+t]=this["_"+t]||[],this["_"+t].push(Array.prototype.slice.call(arguments)),this}},s=["addRecord","blockEvents","fetchServerCookie","fetchGlobalID","fetchUserSegments","resetUUID","ready","setSignedMode","setAnonymousMode","set","trackEvent","trackPageview","trackClicks","unblockEvents"],n=0;n<s.length;n++){var c=s[n];e[t].prototype[c]=r(c)}var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=("https:"===document.location.protocol?"https:":"http:")+"//td-jssdk.s3.amazonaws.com/td.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)}}("Treasure",this);
  </script>
  <script defer>
    var td = new Treasure({
      database: 'xxxxxxxxxx',
      writeKey: 'xxxxxxxxxx',
      host: 'xxxxxxxxxx'
    })

    td.setSignedMode()
    td.set('$global', 'td_global_id', 'td_global_id')
    td.trackPageview('pageview_3_0', function () {
      console.log('tracked pageview')

      td.fetchGlobalID(function (value) {
        console.log('yay: ', value)
      }, function () {
        console.log('nay')
      })
    })
    td.trackClicks()

    td.trackEvent('track_event', {date_string: (new Date()).toString()}, function () {
      console.log('track event: yay')
    }, function () {
      console.log('track event: nay')
    })

    td.addRecord('add_record', { ramen: 'ラーメン' }, function () {
      console.log('add record: yay')
    }, function () {
      console.log('add record: nay')
    })

    td.fetchUserSegments({
      audienceToken: ['xxxxxxxxxx'],
      keys: {
        email: 'someone@somewhere.com'
      }
    }, function (response) {
      console.log('user segment: yay')
    }, function () {
      console.log('user segment: nay')
    })
  </script>
</head>
<body>
  <div class="container">
    <h1>-TD*JS*SDK-</h1>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fuga expedita doloribus itaque quae modi cupiditate corporis dignissimos assumenda eos, nam veritatis ipsam repellat dolore voluptatibus ullam quod laudantium amet. Fugiat!
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fuga expedita doloribus itaque quae modi cupiditate corporis dignissimos assumenda eos, nam veritatis ipsam repellat dolore voluptatibus ullam quod laudantium amet. Fugiat!
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fuga expedita doloribus itaque quae modi cupiditate corporis dignissimos assumenda eos, nam veritatis ipsam repellat dolore voluptatibus ullam quod laudantium amet. Fugiat!
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fuga expedita doloribus itaque quae modi cupiditate corporis dignissimos assumenda eos, nam veritatis ipsam repellat dolore voluptatibus ullam quod laudantium amet. Fugiat!
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fuga expedita doloribus itaque quae modi cupiditate corporis dignissimos assumenda eos, nam veritatis ipsam repellat dolore voluptatibus ullam quod laudantium amet. Fugiat!
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fuga expedita doloribus itaque quae modi cupiditate corporis dignissimos assumenda eos, nam veritatis ipsam repellat dolore voluptatibus ullam quod laudantium amet. Fugiat!
    </p>
  </div>
  <button>Click me!</button>
</body>
</html>
